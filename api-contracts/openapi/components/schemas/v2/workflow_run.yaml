V2WorkflowRun:
  properties:
    metadata:
      $ref: ".././metadata.yaml#/APIResourceMeta"
    id:
      type: string
      description: The ID of the workflow run.
      example: bb214807-246e-43a5-a25d-41761d1cff9e
      minLength: 36
      maxLength: 36
      format: uuid
    taskId:
      type: string
      description: The ID of the task associated with this workflow run.
      example: bb214807-246e-43a5-a25d-41761d1cff9e
      minLength: 36
      maxLength: 36
      format: uuid
    status:
      $ref: "#/V2TaskStatus"
    timestamp:
      type: string
      format: date-time
      description: The timestamp of the workflow run.
    errorMessage:
      type: string
      description: The error message of the workflow run.
    startedAt:
      type: string
      format: date-time
      description: The timestamp the workflow run started.
    finishedAt:
      type: string
      format: date-time
      description: The timestamp the workflow run finished.
    duration:
      type: integer
      description: The duration of the workflow run.
    tenantId:
      type: string
      description: The ID of the tenant.
      example: bb214807-246e-43a5-a25d-41761d1cff9e
      minLength: 36
      maxLength: 36
      format: uuid
    additionalMetadata:
      type: object
      description: Additional metadata for the workflow run.
    displayName:
      type: string
      description: The display name of the workflow run.
  required:
    - metadata
    - id
    - taskId
    - status
    - timestamp
    - tenantId
    - displayName
    - startedAt
    - finishedAt
    - duration
    - additionalMetadata


V2WorkflowRuns:
  type: object
  properties:
    pagination:
      $ref: ".././metadata.yaml#/PaginationResponse"
    rows:
      type: array
      items:
        $ref: "#/V2WorkflowRun"
      description: The workflow runs.
  required:
    - pagination
    - rows

V2ListStepRunEventsForWorkflowRun:
  properties:
    pagination:
      $ref: ".././metadata.yaml#/PaginationResponse"
    rows:
      items:
        $ref: "#/V2StepRunEvent"
      type: array

V2StepRunEvent:
  type: object
  properties:
    id:
      type: string
      format: uuid
    timestamp:
      type: string
      format: date-time
    taskId:
      type: string
      format: uuid
    taskDisplayName:
      type: string
    taskInput:
      type: object
    message:
      type: string
    data:
      type: object
    error_message:
      type: string
    event_type:
      $ref: "#/V2EventType"
    worker_id:
      type: string
      format: uuid
    additionalMetadata:
      type: object


  required:
    - id
    - status
    - timestamp
    - taskId
    - severity
    - message



V2TaskStatus:
  type: string
  enum:
    - QUEUED
    - RUNNING
    - COMPLETED
    - CANCELLED
    - FAILED

V2EventType:
  type: string
  enum:
    - REQUEUED_NO_WORKER
    - REQUEUED_RATE_LIMIT
    - SCHEDULING_TIMED_OUT
    - ASSIGNED
    - STARTED
    - FINISHED
    - FAILED
    - RETRYING
    - CANCELLED
    - TIMED_OUT
    - REASSIGNED
    - SLOT_RELEASED
    - TIMEOUT_REFRESHED
    - RETRIED_BY_USER
    - SENT_TO_WORKER
    - RATE_LIMIT_ERROR
    - ACKNOWLEDGED
    - CREATED
