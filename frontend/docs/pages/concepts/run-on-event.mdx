import { snippets } from "@/lib/generated/snippets";
import { Snippet } from "@/components/code";
import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";

# Event Trigger

> This example assumes we have a [task](/essentials/your-first-task) registered on a running [worker](/essentials/workers).

Run-on-event allows you to trigger one or more tasks when a specific event occurs. This is useful when you need to execute a task in response to an ephemeral event where the result is not important. A few common use cases for event-triggered task runs are:

1. Running a task when an ephemeral event is received, such as a webhook or a message from a queue.
2. When you want to run multiple independent tasks in response to a single event. For instance, if you wanted to run a `send_welcome_email` task, and you also wanted to run a `grant_new_user_credits` task, and a `reward_referral` task, all triggered by the signup. In this case, you might declare all three of those tasks with an event trigger for `user:signup`, and then have them all kick off when that event happens.

<Callout type="info">
  Event triggers evaluate tasks to run at the time of the event. If an event is
  received before the task is registered, the task will not be run.
</Callout>

## Declaring Event Triggers

To run a task on an event, you need to declare the event that will trigger the task. This is done by declaring the `on_events` property in the task declaration.

<UniversalTabs items={["Python", "Typescript", "Go", "Ruby"]}>
  <Tabs.Tab title="Python">
    <Snippet src={snippets.python.events.worker.event_trigger} />
  </Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <Snippet
      src={snippets.typescript.on_event.workflow.run_workflow_on_event}
    />
  </Tabs.Tab>
  <Tabs.Tab title="Go">
    <Snippet src={snippets.go.on_event.main.run_workflow_on_event} />
  </Tabs.Tab>
  <Tabs.Tab title="Ruby">
    <Snippet src={snippets.ruby.events.worker.event_trigger} />
  </Tabs.Tab>
</UniversalTabs>

<Callout type="info">
  Note: Multiple tasks can be triggered by the same event.
</Callout>

<Callout type="info">
  As of engine version 0.65.0, Hatchet supports wildcard event triggers using
  the `*` wildcard pattern. For example, you could register `subscription:*` as
  your event key, which would match incoming events like `subcription:create`,
  `subscription:renew`, `subscription:cancel`, and so on.
</Callout>
