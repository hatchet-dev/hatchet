import { snippets } from "@/lib/generated/snippets";
import { Snippet } from "@/components/code";
import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";

## Wait For Event

Wait For Event is a feature of **durable tasks** that lets a task pause until an external event arrives before continuing. When a task waits for an event, it is [evicted](/concepts/durable-workflows/durable-task-execution/task-eviction) from the worker — freeing the slot — and re-queued when the event arrives. Even if the task is interrupted and requeued while waiting, the event will still be processed — when it resumes, it reads the event from the durable event log and continues.

## Declaring a wait for event

Wait For Event is declared using the context method `WaitFor` (or utility method `WaitForEvent`) on the `DurableContext` object.

<UniversalTabs items={["Python", "Typescript", "Go", "Ruby"]}>
  <Tabs.Tab title="Python">

<Snippet src={snippets.python.durable_event.worker.durable_event} />

</Tabs.Tab>
<Tabs.Tab title="Typescript">

<Snippet src={snippets.typescript.durable_event.workflow.durable_event} />

</Tabs.Tab>
<Tabs.Tab title="Go">

<Snippet src={snippets.go.durable.event.main.durable_event} />

</Tabs.Tab>
  <Tabs.Tab title="Ruby">
    <Snippet src={snippets.ruby.durable_event.worker.durable_event} />
  </Tabs.Tab>
</UniversalTabs>

## Event filters

Events can be filtered using [CEL](https://github.com/google/cel-spec) expressions. For example, to only receive `user:update` events for a specific user, you can use the following filter:

<UniversalTabs items={["Python", "Typescript", "Go", "Ruby"]}>
  <Tabs.Tab title="Python">

<Snippet src={snippets.python.durable_event.worker.durable_event_with_filter} />

</Tabs.Tab>
<Tabs.Tab title="Typescript">

<Snippet
  src={snippets.typescript.durable_event.workflow.durable_event_with_filter}
/>

</Tabs.Tab>
<Tabs.Tab title="Go">

<Snippet src={snippets.go.durable.event.main.durable_event_with_filter} />

</Tabs.Tab>
  <Tabs.Tab title="Ruby">
    <Snippet src={snippets.ruby.durable_event.worker.durable_event_with_filter} />
  </Tabs.Tab>
</UniversalTabs>
