import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";
import { GithubSnippet, getSnippets } from "@/components/code";

export const DurableGo = {
  path: "examples/v1/workflows/durable-event.go",
};

export const DurableTs = {
  path: "src/v1/examples/durable-event/workflow.ts",
};

export const DurablePy = {
  path: "examples/durable_event/worker.py",
};

export const getStaticProps = ({}) =>
  getSnippets([DurableGo, DurableTs, DurablePy]);

## Durable Events

Durable events are a feature of **durable tasks** which allow tasks to wait for an event to occur before continuing. This is useful in cases where a task needs to wait for a long time for an external action. Durable events are useful, because even if your task is interrupted and requeued while waiting for an event, the event will still be processed. When the task is resumed, it will read the event from the durable event log and continue processing.

## Declaring durable events

Durable events are declared using the context method `WaitFor` (or utility method `WaitForEvent`) on the `DurableContext` object.

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">

<GithubSnippet src={DurablePy} target="Durable Event" />

</Tabs.Tab>
<Tabs.Tab title="Typescript">

<GithubSnippet src={DurableTs} target="Durable Event" />

</Tabs.Tab>
<Tabs.Tab title="Go">

<GithubSnippet src={DurableGo} target="Durable Event" />

</Tabs.Tab>
</UniversalTabs>

## Durable event filters

Durable events can be filtered using [CEL](https://github.com/google/cel-spec) expressions. For example, to only receive `user:update` events for a specific user, you can use the following filter:

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">

<GithubSnippet src={DurablePy} target="Durable Event With Filter" />

</Tabs.Tab>
<Tabs.Tab title="Typescript">

<GithubSnippet src={DurableTs} target="Durable Event With Filter" />

</Tabs.Tab>
<Tabs.Tab title="Go">

<GithubSnippet src={DurableGo} target="Durable Event With Filter" />

</Tabs.Tab>
</UniversalTabs>
