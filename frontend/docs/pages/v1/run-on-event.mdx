import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";
import { GithubSnippet, getSnippets } from "@/components/code";

export const SimpleTs = {
  path: "src/v1/examples/on_event/workflow.ts",
};

export const EventTs = {
  path: "src/v1/examples/on_event/event.ts",
};

export const getStaticProps = ({}) => getSnippets([SimpleTs, EventTs]);

# Run on Event

> This example assumes we have a [workflow](./basic-workflows.mdx) registered on a running [worker](./workers.mdx).

Run on event allows you to trigger one or more workflows when a specific event occurs. This is useful when you need to execute a workflow in response to an ephemeral event where the result is not important, such as a webhook or a message from a queue, or when multiple independent workflows need to be run in response to a single event, such as a user:signup event.

<Callout type="info">
  Run on event evaluates workflows to run at the time of the event. If an event
  is received before the workflow is registered, the workflow will not be run.
</Callout>

## On Event Workflow Trigger

To run a workflow on an event, you need to declare the event that will trigger the workflow. This is done by declaring the `on_event` property in the workflow declaration.

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">TODO V1 DOCS</Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <GithubSnippet src={SimpleTs} target="Run workflow on event" />
  </Tabs.Tab>
  <Tabs.Tab title="Go">TODO V1 DOCS</Tabs.Tab>
</UniversalTabs>

<Callout type="info">
  Note: Multiple workflows can be triggered by the same event.
</Callout>

### Pushing an Event

You can push an event to the event queue by calling the `push` method on the hatchet event client and providing the event name and payload.

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">TODO V1 DOCS</Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <GithubSnippet src={EventTs} target="Pushing an Event" />
  </Tabs.Tab>
  <Tabs.Tab title="Go">TODO V1 DOCS</Tabs.Tab>
</UniversalTabs>
