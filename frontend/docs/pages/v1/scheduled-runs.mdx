import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";
import { GithubSnippet, getSnippets } from "@/components/code";

export const SimpleTs = {
  path: "src/v1/examples/simple/schedule.ts",
};

export const getStaticProps = ({}) => getSnippets([SimpleTs]);

# Scheduled Runs

> This example assumes we have a [workflow](./basic-workflows.mdx) registered on a running [worker](./workers.mdx).

Scheduled runs allow you to trigger a workflow at a specific time in the future. This is useful when you need to execute a workflow at a specific time, such as sending a reminder email at a specific hour or a one-time maintenance task at a predetermined time.

Hatchet supports scheduled runs to run on a schedule defined in a few different ways:

- [Programmatically](./schedule-trigger.mdx#programmatically-creating-scheduled-runs): Use the Hatchet SDKs to dynamically set the schedule of a workflow (i.e. customer defined schedule).
- [Hatchet Dashboard](./schedule-trigger.mdx#managing-scheduled-runs-in-the-hatchet-dashboard): Manually create scheduled runs from the Hatchet Dashboard.

<Callout type="warning">
  The scheduled time is when Hatchet **enqueues** the workflow, not when the run
  starts. Scheduling constraints like concurrency limits, rate limits, and retry
  policies can affect run start times.
</Callout>

## Programmatically Creating Scheduled Runs

### Create a Scheduled Run

You can create dynamic scheduled runs programmatically via the API to run workflows at a specific time in the future.

Here's an example of creating a scheduled run to trigger a workflow tomorrow at noon:

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">TODO V1 DOCS</Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <GithubSnippet src={SimpleTs} target="Create a Scheduled Run" />
  </Tabs.Tab>
  <Tabs.Tab title="Go">TODO V1 DOCS</Tabs.Tab>
</UniversalTabs>

In this example you can have different scheduled times for different customers, or dynamically set the scheduled time based on some other business logic.

When creating a scheduled run via the API, you will receive a scheduled run object with a metadata property containing the id of the scheduled run. This id can be used to reference the scheduled run when deleting the scheduled run and is often stored in a database or other persistence layer.

<Callout type="info">
  Note: Be mindful of the time zone of the scheduled run. Scheduled runs are **always** stored and returned in UTC.
</Callout>

### Deleting a Scheduled Run

You can delete a scheduled run by calling the `delete` method on the scheduled run object.

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">TODO V1 DOCS</Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <GithubSnippet src={SimpleTs} target="Deleting a Scheduled Run" />
  </Tabs.Tab>
  <Tabs.Tab title="Go">TODO V1 DOCS</Tabs.Tab>
</UniversalTabs>


### Listing Scheduled Runs

You can list all scheduled runs for a workflow by calling the `list` method on the scheduled run object.

<UniversalTabs items={["Python", "Typescript", "Go"]}>
  <Tabs.Tab title="Python">TODO V1 DOCS</Tabs.Tab>
  <Tabs.Tab title="Typescript">
    <GithubSnippet src={SimpleTs} target="Listing Scheduled Runs" />
  </Tabs.Tab>
  <Tabs.Tab title="Go">TODO V1 DOCS</Tabs.Tab>
</UniversalTabs>
## Managing Scheduled Runs in the Hatchet Dashboard

In the Hatchet Dashboard, you can view and manage scheduled runs for your workflows.

Navigate to "Triggers" > "Scheduled Runs" in the left sidebar and click "Create Scheduled Run" at the top right.

You can specify run parameters such as Input, Additional Metadata, and the Scheduled Time.

![Create Scheduled Run](../../public/schedule-dash.gif)

## Scheduled Run Considerations

When using scheduled runs, there are a few considerations to keep in mind:

1. **Time Zone**: Scheduled runs are stored and returned in UTC. Make sure to consider the time zone when defining your scheduled time.

2. **Execution Time**: The actual execution time of a scheduled run may vary slightly from the scheduled time. Hatchet makes a best-effort attempt to enqueue the workflow as close to the scheduled time as possible, but there may be slight delays due to system load or other factors.

3. **Missed Schedules**: If a scheduled workflow is missed (e.g., due to system downtime), Hatchet will not automatically run the missed instances.

4. **Overlapping Schedules**: If a workflow is still running when a second scheduled run is scheduled to start, Hatchet will start a new instance of the workflow or respect [concurrency](../concurrency/overview.mdx) policy.
