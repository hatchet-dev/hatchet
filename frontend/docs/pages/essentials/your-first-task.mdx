import { snippets } from "@/lib/generated/snippets";
import { Snippet } from "@/components/code";
import { Callout, Card, Cards, Steps, Tabs } from "nextra/components";
import UniversalTabs from "@/components/UniversalTabs";

# Declaring Your First Task

In Hatchet, the fundamental unit of invocable work is a [Task](#defining-a-task). Each task is an atomic function.

As we continue to build with Hatchet, we'll add additional configuration options to compose tasks into [DAG workflows](/concepts/dags) or [procedural child spawning](/concepts/child-spawning).

## Defining a Task

Start by declaring a task with a name. The task object can declare additional task-level configuration options which we'll cover later.

The returned object is an instance of the `Task` class, which is the primary interface for interacting with the task (i.e. [running](/concepts/run-with-results), [enqueuing](/concepts/run-no-wait), [scheduling](/concepts/scheduled-runs), etc).

<UniversalTabs items={["Python", "Typescript", "Go", "Ruby"]}>
  <Tabs.Tab title="Python">

<Snippet src={snippets.python.quickstart.workflows.first_task.simple_task} />
</Tabs.Tab>
<Tabs.Tab title="Typescript">
<Snippet src={snippets.typescript.simple.workflow.declaring_a_task} />
</Tabs.Tab>
<Tabs.Tab title="Go">
<Snippet src={snippets.go.simple.main.declaring_a_task} />
</Tabs.Tab>
<Tabs.Tab title="Ruby">
<Snippet src={snippets.ruby.quickstart.workflows.first_task.simple_task} />
</Tabs.Tab>
</UniversalTabs>

## Concepts you can use with a task

You can configure a task with the following concepts. Each links to full documentation.

| Concept | Description |
| --- | --- |
| [Retries](/concepts/retry-policies) | Retry the task on failure, with optional backoff. |
| [Timeouts](/concepts/timeouts) | Limit how long a task may wait to be scheduled or to run. |
| [Concurrency](/concepts/concurrency) | Limit how many runs of this task execute at once. |
| [Rate limits](/concepts/rate-limits) | Throttle task execution (e.g. per minute). |
| [Worker affinity](/concepts/worker-affinity) | Prefer or require specific workers for this task. |

## Running a Task

With your task defined, you can import it wherever you need to use it and invoke it with the `run` method.

<Callout type="warning">
  NOTE: You must first [register the task on a worker](/essentials/workers) before you
  can run it. Calling `your_task.run` will enqueue a task to be executed by a
  worker but it will wait indefinitely for the task to be executed.
</Callout>

<UniversalTabs items={["Python", "Typescript", "Go", "Ruby"]}>
  <Tabs.Tab title="Python">

<Snippet src={snippets.python.quickstart.run.run_a_task} />

</Tabs.Tab>
<Tabs.Tab title="Typescript">
<Snippet src={snippets.typescript.simple.run.running_a_task} />
</Tabs.Tab>
<Tabs.Tab title="Go">
<Snippet src={snippets.go.simple.main.running_a_task} />
</Tabs.Tab>
<Tabs.Tab title="Ruby">
<Snippet src={snippets.ruby.quickstart.run.run_a_task} />
</Tabs.Tab>
</UniversalTabs>

There are many ways to run a task, including:

- [Running a task with results](/concepts/run-with-results)
- [Enqueuing a task](/concepts/run-no-wait)
- [Scheduling a task](/concepts/scheduled-runs)
- [Scheduling a task with a cron schedule](/concepts/cron-runs)
- [Event-driven task execution](/concepts/run-on-event)

Now that you have defined a complete task, you can move on to [creating a worker to execute the task](/essentials/workers).
